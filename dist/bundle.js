!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);class n extends class{findEl(e,t){return void 0!==t?t.querySelector(e):document.querySelector(e)}findAllEl(e,t){return void 0!==t?t.querySelector(e):document.querySelectorAll(e)}getById(e){return document.getElementById(e)}getNode(e,t){return document.importNode(e,t)}configureListener(e,t,i){e.addEventListener(t,i.bind(this))}empty(e){e.innerHTML=""}}{constructor(e,t,i,n){super(),this.insertAtBeginning=i,this.templateElement=this.getById(e),this.hostElement=this.getById(t);const r=this.getNode(this.templateElement.content,!0);this.element=r.firstElementChild,n&&(this.element.id=n),this.attach()}attach(){this.hostElement.insertAdjacentElement(this.insertAtBeginning?"afterbegin":"beforeend",this.element)}}var r;!function(e){e[e.Active=0]="Active",e[e.Inactive=1]="Inactive"}(r||(r={}));class s{constructor(e,t,i,n){this._title=e,this._description=t,this._people=i,this._status=n,this._uniqueId=Math.random().toString()}get uniqueId(){return this._uniqueId}get title(){return this._title}get description(){return this._description}get people(){return this._people}get status(){return this._status}set status(e){this._status=e}}class o extends class{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}publish(e){this.listeners.forEach(t=>{t(e)})}}{constructor(){super(),this._projects=[]}static getInstance(){if(this._instance)return this._instance;return new o}addProject(e,t,i){this._projects.push(new s(e,t,i,r.Active)),this.publish(this._projects.slice())}moveProject(e,t){const i=this._projects.find(t=>t.uniqueId===e);void 0!==i&&i.status!==t&&(i.status=t),this.publish(this._projects.slice())}}const l=o.getInstance();var a=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o};class u extends n{constructor(){super("project-input","app",!0,"user-input"),this.configure()}configure(){this.titleInputEl=this.findEl("#title",this.element),this.descriptionInputEl=this.findEl("#description",this.element),this.peopleInputEl=this.findEl("#people",this.element),this.configureListener(this.element,"submit",this._handleSubmit)}renderContent(){}_isString(e){return"string"==typeof e.value}_isNumber(e){return"number"==typeof e.value}_isValid(e){return e.every(e=>{let t=!0;return void 0!==e.isRequired&&(t=t&&0!==e.value.toString().length),void 0!==e.minLength&&this._isString(e)&&(t=t&&e.value.toString().length>=e.minLength),void 0!==e.maxLength&&this._isString(e)&&(t=t&&e.value.toString().length<=e.maxLength),void 0!==e.min&&this._isNumber(e)&&(t=t&&e.value>=e.min),void 0!==e.max&&this._isNumber(e)&&(t=t&&e.value<=e.max),t})}_gatherUserInput(){const{value:e}=this.descriptionInputEl,{value:t}=this.titleInputEl,{value:i}=this.peopleInputEl,n={value:t,isRequired:!0},r={value:+i,min:1,max:5,isRequired:!0},s={value:i,minLength:1,maxLength:300,isRequired:!0};return this._isValid([n,s,r])?[t,e,+i]:(alert("Error: Please fill out all fields"),{error:"Validation Failed"})}_handleSubmit(e){e.preventDefault();const t=this._gatherUserInput();if(Array.isArray(t)){const[e,i,n]=t;l.addProject(e,i,n)}}}a([(e,t,i)=>({configurable:!0,enumerable:!0,get(){return i.value.bind(this)}})],u.prototype,"_handleSubmit",null);class c extends n{constructor(e,t){super("single-project",e,!1,t.uniqueId),this._project=t,this.configure(),this.renderContent()}configure(){this.configureListener(this.element,"dragstart",this.dragStartHandler),this.configureListener(this.element,"dragend",this.dragEndHandler)}renderContent(){this.findEl("h2",this.element).textContent=this._project.title,this.findEl("h3",this.element).textContent=this.peopleText,this.findEl("p",this.element).textContent=this._project.description}dragStartHandler(e){e.dataTransfer.setData("text/plain",this._project.uniqueId),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){console.log("Drag End",e)}get peopleText(){const{people:e}=this._project;return`${e} Person${1!==e?"s":""} Assigned`}}class h extends n{constructor(e){super("project-list","app",!1,e+"-projects"),this.type=e,this._projectsToShow=[],this.configure(),this.renderContent()}configure(){this.configureListener(this.element,"dragover",this.dragOverHandler),this.configureListener(this.element,"dragleave",this.dragLeaveHandler),this.configureListener(this.element,"drop",this.dropHandler),l.addListener(e=>{this._projectsToShow=this._filterProjectsByStatus(e),this._renderProjects()})}dragOverHandler(e){if("text/plain"===e.dataTransfer.types[0]){e.preventDefault(),this.findEl("ul",this.element).classList.add("droppable")}}dropHandler(e){const t=e.dataTransfer.getData("text/plain"),i="active"===this.type?r.Active:r.Inactive;l.moveProject(t,i)}dragLeaveHandler(e){this.findEl("ul",this.element).classList.remove("droppable")}_filterProjectsByStatus(e){return e.filter(e=>"active"===this.type?e.status===r.Active:e.status===r.Inactive)}_renderProjects(){const e=this.getById(this.type+"-projects-list");this.empty(e),this._projectsToShow.forEach(e=>{new c(this.findEl("ul",this.element).id,e)})}renderContent(){const e=this.type+"-projects-list";this.findEl("ul",this.element).id=e,this.findEl("h2",this.element).textContent=this.type.toUpperCase()+" PROJECTS"}}new u,new h("active"),new h("finished")}]);